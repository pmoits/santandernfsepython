## Generated mta.yaml based on template version 0.4.0
## appName = nfse-python
## language=nodejs; multiTenant=false
## approuter=
_schema-version: '3.1'
ID: nfse-python
version: 1.0.0
description: "Santander NFSE Python"


modules:

 # --------------------- PYTHON MODULE ------------------------
 - name: nfse-srv-python
 # ------------------------------------------------------------
   type: python
   path: ./nfse-srv-python
   parameters:
      memory: 4096M   
      disk-quota: 4096M
   properties: 
     SAP_JWT_TRUST_ACL: "[{\"clientid\":\"*\",\"identityzone\":\"*\"}]"
   provides:
    - name: srv-python-api   # required by consumers of CAP services (e.g. approuter)
      properties:
        srv-url: ${default-url}   
   requires:
    - name: nfse-xsuaa-service
    - name: nfse-destination-service
      parameters:
        content-target: true      




resources:
 
# ----------------- Destination Service -------------------
 - name: nfse-destination-service
# ---------------------------------------------------------
   type: org.cloudfoundry.existing-service
   requires:
     - name: srv-python-api
   parameters:
     config:
       init_data:
         subaccount:
           existing_destinations_policy: update
           destinations:
             - Name: nfse-python
               Description: Nfse Python Destination Service
               Authentication: NoAuthentication
               ProxyType: Internet
               Type: HTTP
               URL: ~{srv-python-api/srv-url}
               HTML5.DynamicDestination: true
               HTML5.ForwardAuthToken: true
               HTML5.Timeout: 300000                               
           


# ok ------------------- XSUAA Service ---------------------
 - name: nfse-xsuaa-service
# ---------------------------------------------------------
   type: org.cloudfoundry.existing-service


 # ok------------- Credential Store Service -------------------
 - name: nfse-credential-store
 # ------------------------------------------------------------
   type: org.cloudfoundry.existing-service
